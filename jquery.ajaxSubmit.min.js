//
// jquery.ajaxSubmit.js - Effortlessly submit forms using AJAX and JSON
//
// Developed by Cory LaViska for A Beautiful Site, LLC
//
// Licensed under the MIT license: http://opensource.org/licenses/MIT
//
jQuery&&function(a){"use strict";function t(){var t=this,i=a(t).data("options.ajaxSubmit");a(t).addClass("ajaxSubmit-busy").find(i.loader).prop("hidden",!1)}function i(t){a(this).data("options.ajaxSubmit",t).on("submit.ajaxSubmit",c)}function e(){a(this).removeData("options.ajaxSubmit").off(".ajaxSubmit")}function n(){a(this).addClass("ajaxSubmit-disabled").find(":input").prop("disabled",!0)}function s(){a(this).removeClass("ajaxSubmit-disabled").find(":input").prop("disabled",!1)}function l(){var t=this,i=a(t).data("options.ajaxSubmit");a(t).find(".ajaxSubmit-invalid").each(function(){var e=this;a(e).removeClass("ajaxSubmit-invalid"),i.hideInvalid.call(t,e)})}function o(){var t=this,i=a(t).data("options.ajaxSubmit");a(t).find(i.message).text("").prop("hidden",!0)}function u(){f.call(this),l.call(this),o.call(this),this.reset()}function d(t){var i=this,e=a(i).data("options.ajaxSubmit");a.each(t,function(t,n){var s=a(i).find(':input[name="'+n+'"]').get(0);a(s).addClass("ajaxSubmit-invalid"),e.showInvalid.call(i,s)})}function r(t){var i=this,e=a(i).data("options.ajaxSubmit");a(i).find(e.message).text(t).prop("hidden",!1)}function c(i){var e=this,n=a(e).data("options.ajaxSubmit");i.preventDefault(),a(e).is(".ajaxSubmit-busy")||n.before&&n.before.call(e)===!1||(o.call(e),l.call(e),t.call(e),a.ajax({url:"function"==typeof n.url?n.url.call(e):n.url,type:"function"==typeof n.method?n.method.call(e):n.method,data:"function"==typeof n.data?n.data.call(e):n.data,dataType:"json"}).done(function(a){f.call(e),a&&a.message&&r.call(e,a.message),a&&a.invalid&&a.invalid.length&&d.call(e,a.invalid),n.success&&n.success.call(e,a),n.after&&n.after.call(e,a)}).fail(function(a,t,i){var s=a.responseJSON;f.call(e),s&&s.message&&r.call(e,s.message),s&&s.invalid&&s.invalid.length&&d.call(e,s.invalid),n.error&&n.error.call(e,s,i),n.after&&n.after.call(e,s)}))}function f(){var t=this,i=a(t).data("options.ajaxSubmit");a(t).removeClass("ajaxSubmit-busy").find(i.loader).prop("hidden",!0)}a.ajaxSubmit={defaults:{data:function(){return a(this).serialize()},hideInvalid:function(t){a(t).closest(".form-group").removeClass("has-warning")},loader:".form-loader",message:".form-message",method:function(){return a(this).attr("method")},showInvalid:function(t){a(t).closest(".form-group").addClass("has-warning")},url:function(){return a(this).attr("action")}}},a.extend(a.fn,{ajaxSubmit:function(l,o){switch("object"==typeof l&&(o=l),l){case"busy":return a(this).each(o===!1?f:t);case"destroy":return a(this).each(e);case"disable":return a(this).each(o===!1?s:n);case"reset":return a(this).each(u);default:return a(this).each(function(){i.call(this,a.extend({},a.ajaxSubmit.defaults,o))})}}})}(jQuery);